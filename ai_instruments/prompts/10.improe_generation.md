



Проблема в том, что MediaService требует character_id как часть пути к файлу. Но у нас появляются другие изображения, которые не связаны с персонажем. Даже более того: хочется более детально сказывать пути к файлам.

1. хочется, чтобы все файлы хранились по схеме "world_id/[character_id]/posts/..."
2. А файлы мира, например - world_id/world_data/...
3. А аватары - world_id/[character_id]/avatars/



То есть нужно изменить логику загрузки и добавления изображений.

1. ConfirmMediaUpload - убрать проверку characterID (и убрать его в том числе из ConfirmUploadRequest api/proto/media/media.proto).
2. в services/media-service/cmd/main.go GetPresignedUploadURL прокидывать еще и world_id в функцию для создания ссылки загрузки

3. Нужно создать какие-то константы-типы медиа, чтобы media-service понимал когда нужно какой путь конструировать.

4. ну и в services/ai-worker/src/api/image_generator.py character_id должен стать опциональным полем (пусть он будет равен world_id, например - очень удобно).  И нужно новое поле - которое будет обозначать тип изображения (и правила, по которым его нужно хранить)








Нужно добавить настройки, позволяющие указывать размер мира при генерации.
(Readme.md)

На фронтенде сейта, на странице генерации мира, должны добавиться 2 новых ползунка:
- Количество персонажей (от 1 до 40)
- количество постов в мире (от 1 до 250)
(frontend/README.md)


Эти параметры должны прокидывваться через 	router.Handle("/api/v1/worlds", jwtMiddleware.RequireAuth(http.HandlerFunc(worldHandler.CreateWorld))).Methods("POST"),
через:
1. services/api-gateway/handlers/world.go
2. api/proto/world/world.proto
3. services/world-service/internal/service/world_service.go (CreateWorld -> s.createInitialGenerationTasks)

(вот как параметры задаются сейчас:
```
// Parameters for initialization task
	parameters := map[string]interface{}{
		"user_prompt": world.Prompt,
		"users_count": 25,  // Default value
		"posts_count": 150, // Default value
		"created_at":  time.Now().Format(time.RFC3339),
	}
    ```
)

ползунки на фронтенде должны быть красивые 






(README.MD)
(docker-compose.yml)
Сейчас постоянно перегенерируются все сервисы при изменении в проекте. Мне это не нравится.

Давай сделаем так, чтобы сервисы перезапускались только при изменении кода в них. А не при изменении кода в других сервисах.

Поэтому сервисы должны зависеть только от кода в:
1. ./api
2. ./config
3. ./pkg
4. ./services/[имя сервиса]
5. .env




Я добавил генерацию фонового изображения мира и аватара мира.
Теперь нужно правильно настроить их отображение на фронтенде.
1. На главной странице, сбоку есть список миров - у них должна корректно отображаться иконка мира
2. В списке мира у каждой карточки мира есть изображение. Но сейчас на нем отображается кусочек иконки - вместо этого на нем должно быть фоновое изображение мира.
3. На странице с постами из мира сверху должно быть большое изображение-заставка мира.

Если что, у иконки соотношение сторон 1к1, а у фонового изображения - 1к2.

Пример данных в запросе:

Запрос /api/v1/worlds
{
    "worlds": [
        {
            "id": "95c726a0-737e-4ccc-b3e8-d92b186fa2ad",
            "name": "коты",
            "prompt": "Мир, в котором за академическим руководителем ходит толпа студентов-котиков.",
            "creator_id": "8e268314-cc31-4b35-b482-d7334755b484",
            "status": "active",
            "created_at": "2025-05-25T19:53:31Z",
            "updated_at": "2025-05-25T19:53:55Z",
            "is_joined": true,
            "image_url": "http://minio:9000/generia-images/95c726a0-737e-4ccc-b3e8-d92b186fa2ad/world_data/4d5cbd2e4ba1053693b269bcc4622fae.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=minioadmin%2F20250525%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250525T195610Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&response-content-type=image%2Fpng&X-Amz-Signature=5ea46d3571dc973af4e7263f3bbe2f4c82c05a11d6a7ec991d7b6857b658ad4e",
            "icon_url": "http://minio:9000/generia-images/95c726a0-737e-4ccc-b3e8-d92b186fa2ad/world_data/92ba6f336b6063c0580be3cd82e519e1.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=minioadmin%2F20250525%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250525T195610Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&response-content-type=image%2Fpng&X-Amz-Signature=87851e45bc37f2c2bd3ba39023c8756a963442a7914a0d1309cadab1415e6696"
        }
    ],
    "total": 1
}

Запрос /api/v1/worlds/{world_id}

{
    "id": "95c726a0-737e-4ccc-b3e8-d92b186fa2ad",
    "name": "коты",
    "prompt": "Мир, в котором за академическим руководителем ходит толпа студентов-котиков. ",
    "creator_id": "8e268314-cc31-4b35-b482-d7334755b484",
    "status": "active",
    "created_at": "2025-05-25T19:53:31Z",
    "updated_at": "2025-05-25T19:53:55Z",
    "is_joined": true
}

Как видишь, при запросе отдельного мира не пробрасываются нужные параметры, поэтому нужно исправить файлы:
- services/world-service/internal/repository/world_repository.go - GetByID() - в этой функции не загружаются из базы нужные параметры



