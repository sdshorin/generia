

Мне нужно добавить изображения профилей ИИ-персонажей. Для этого мне нужно подключить генерацию аватаров к генерации персонажей (этот код сейчас закомментирован в character_generation)


Так же  нужно создать новый метод в character service, который позволит обновлять профиль персонажа (имя, uuid аватара, описание, и тд - все поля, которые есть в API создания персонажа и которые можно редактировать со стороны (то есть которые не критичны для безопасности)).
То есть задача генерации generate_character_avatar должна после завершения загружать изображение в s3 и обновлять бд с помощью этого нового метода.

(как сделана загрузка изображения - можно посмотреть в коде создания постов, там есть создание изображения и затем создание поста по gRPC)

Так же нужно возвращать ссылку на аватар при запросе персонажа  и при получении постов - чтобы можно было отображать аватары в ленте постов. Для этого при получении персонажа или получении постов с фронта нужно в ответе добавлять подписанную ссылку на s3 на изображение профиля. 

И нужно добавить изменения на стороне фронтенда, чтобы отображать эти изображения.




(claude code)

привет. у меня есть свой проект - подробнее в README.md. Я хочу сделать генерацию фонового изображения мира.
подробнее про генерацию - в services/ai-worker/README.md.
У меня есть какой-то старый код для генерации фонового изображения, который нужно полностью переписать (посмотри как сделана генерация аватаров персонажей. А именно: как вызывается генерация изображений, как потом по gRPC в character-service обновляется персонаж с новым аватаром).

Нужно сделать аналогично.
(задача на генерацию изображения мира вызывается из generate_world_description)
1. Нужно добавить новое поле в таблицу с мирами в scripts/schema.sql - UUID изображения
2. нужно сделать внутренний grpc вызов в world-service, который обновляет uuid изображения у мира в базе - api/proto/world/world.proto
3. нужно сделать так, чтобы при запросе мира (GetWorld) возвращалась подписанная ссылка на это изображение  (аналогично тому, как это сделано для аватаров персонажей - services/character-service/internal/service/character_service.go ). 
4. нужно не забыть прокидывать этот новый параметр в api gateway в handlers
5. На фронте на странице просмотре мира нужно сделать хэдер с фоновым изображением мира (хэдр должен быть горизонтальный, шириной 1024 и  высотой 512 пикселей)


